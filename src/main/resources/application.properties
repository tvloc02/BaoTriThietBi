# Active Profile
spring.profiles.active=dev
server.port=8081

# Application Configuration
spring.application.name=he-thong-quan-ly-bao-tri
server.servlet.context-path=/


# ? Thêm c?u hình ?? tránh circular dependency
spring.main.allow-circular-references=true
spring.main.lazy-initialization=false


# Thymeleaf Configuration
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.cache=false

# Static Resources
spring.web.resources.static-locations=classpath:/static/
spring.web.resources.cache.period=0
spring.web.resources.chain.cache=false

# Internationalization
spring.messages.basename=messages/messages
spring.messages.encoding=UTF-8
spring.messages.fallback-to-system-locale=false

# File Upload
spring.servlet.multipart.enabled=true
spring.servlet.multipart.file-size-threshold=2KB
spring.servlet.multipart.max-file-size=200MB
spring.servlet.multipart.max-request-size=215MB

# Security Configuration - XÓA C?U HÌNH M?C ??NH
# Chúng ta s? s? d?ng custom security config thay vì c?u hình m?c ??nh này
# spring.security.user.name=admin
# spring.security.user.password=123456
# spring.security.user.roles=ADMIN

# JWT Configuration
jwt.secret=hethongquanlybaotrithietbisecretkey2024verylongsecretkey
jwt.expiration=86400
jwt.refresh.expiration=604800

# Logging Configuration - T?ng c??ng logging ?? debug
logging.level.com.hethong.baotri=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.web.servlet=DEBUG
logging.level.org.springframework.security.web=DEBUG
logging.level.org.springframework.security.config=DEBUG
logging.level.org.springframework.boot.autoconfigure.security=DEBUG
logging.level.org.thymeleaf=INFO
logging.level.org.springframework.aop=INFO

# Console logging pattern
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Error Handling
server.error.whitelabel.enabled=false
server.error.path=/error
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param
server.error.include-exception=true

# Session Configuration
server.servlet.session.timeout=30m
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.same-site=lax

# Tomcat Configuration
server.tomcat.additional-tld-skip-patterns=*.jar

# Management endpoints
management.endpoints.web.exposure.include=health,info,beans,env,configprops
management.endpoint.health.show-details=always
management.info.build.enabled=true
management.info.git.enabled=true

# DevTools (n?u có)
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true

# Mail Configuration (t?m th?i disable)
spring.mail.host=
spring.mail.port=
spring.mail.username=
spring.mail.password=

# H2 Database configuration
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.datasource.url=jdbc:h2:file:./testdb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# JPA
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true

